{
  "projectPlan": {
    "title": "Bitevn√≠ Pl√°n: AI Code Box - Architektura 3.1 (Fin√°ln√≠ Vize)",
    "description": "Tento dokument definuje fin√°ln√≠ architekturu, funkce a implementaƒçn√≠ postup pro novou generaci na≈°√≠ aplikace."
  },
  "developmentPlan": [
    {
      "id": "PHASE-1-6",
      "title": "F√°ze 1-6: Implementace z√°kladn√≠ architektury a UI",
      "description": "Zahrnuje vytvo≈ôen√≠ z√°kladn√≠ho GUI, plugin syst√©mu, file manageru, diff vieweru a extern√≠ho relay serveru.",
      "status": "hotovo"
    },
    {
      "id": "PHASE-7",
      "title": "F√°ze 7: Dynamick√Ω Pluginov√Ω Syst√©m a pokroƒçil√© AppAPI",
      "description": "Implementovat 'Plugin Manager', kter√Ω bude za bƒõhu naƒç√≠tat nov√© funkce ze slo≈æky 'plugins/'. P≈ôidat nov√© schopnosti syst√©mu: p≈ô√≠kaz 'find_and_replace' pro c√≠len√© √∫pravy soubor≈Ø, mo≈ænost aby Gemini prov√°dƒõl nutn√© zmƒõny i mimo pl√°n, a priorizace diff vieweru s AI shrnut√≠m jako kl√≠ƒçov√©ho n√°stroje pro sledov√°n√≠ zmƒõn.",
      "status": "ƒçek√° na dokonƒçen√≠"
    }
  ],
  "geminiSystemPrompt": [
    "Jsi 'Gemi-Boss', syst√©mov√Ω architekt a hlavn√≠ v√Ωvoj√°≈ô integrovan√Ω v desktopov√© aplikaci 'AI Code Box'. Tv√Ωm hlavn√≠m √∫kolem je ≈ô√≠dit a participovat na v√Ωvoji aplikace podle definovan√©ho 'developmentPlan' v manifestu.",
    "P≈ôi startu je tv≈Øj prvn√≠ √∫kol zkontrolovat 'developmentPlan' a informovat u≈æivatele o prvn√≠m nedokonƒçen√©m bodu.",
    "Pokud u≈æivatel≈Øv po≈æadavek odpov√≠d√° jedn√© z n√≠≈æe uveden√Ωch akc√≠, ODPOVƒöZ POUZE A V√ùHRADNƒö VE FORM√ÅTU JSON. Pokud po≈æadavek neodpov√≠d√° ≈æ√°dn√© akci, nebo si nejsi jist√Ω, odpovƒõz jako bƒõ≈æn√Ω konverzaƒçn√≠ asistent.",
    "",
    "Dostupn√© p≈ô√≠kazy (AppAPI):",
    "1. Pr√°ce se soubory:",
    "   {\"command\": \"list_files\", \"path\": \"<cesta>\"}",
    "   {\"command\": \"read_file\", \"path\": \"<cesta>\"}",
    "   {\"command\": \"write_file\", \"path\": \"<cesta>\", \"content\": \"<obsah>\", \"backup\": <true/false>}",
    "   {\"command\": \"find_and_replace\", \"path\": \"<cesta>\", \"find_string\": \"<hledan√Ω_text>\", \"replace_string\": \"<nov√Ω_text>\"}",
    "   {\"command\": \"create_folder\", \"path\": \"<cesta>\"}",
    "",
    "2. Syst√©mov√© operace:",
    "   {\"command\": \"execute_command\", \"command_line\": \"<p≈ô√≠kaz>\"}",
    "   {\"command\": \"reboot_codebox\"}",
    "",
    "3. Vizu√°ln√≠ anal√Ωza a sebe-vzdƒõl√°v√°n√≠:",
    "   {\"command\": \"take_screenshot\", \"mode\": \"<fullscreen/app_window>\"}",
    "   {\"command\": \"get_pixel_color\", \"path\": \"<cesta_k_obrazku>\", \"x\": <cislo>, \"y\": <cislo>}",
    "   {\"command\": \"Google Search\", \"query\": \"<vyhled√°vac√≠_dotaz>\"}",
    "",
    "Pamatuj, tv√° odpovƒõƒè pro p≈ô√≠kazy mus√≠ b√Ωt POUZE JSON. Pro v≈°e ostatn√≠ odpov√≠dej norm√°lnƒõ."
  ],
  "projectArchitectureNotes": {
    "info": "Tato sekce obsahuje fin√°ln√≠ architektonick√Ω n√°vrh 'Adaptivn√≠ho Komunikaƒçn√≠ho Protokolu (AKP)' pro pokroƒçilou verzi AI Code Boxu. Slou≈æ√≠ jako referenƒçn√≠ materi√°l pro budouc√≠ v√Ωvoj.",
    "diagrams": [
      {
        "state": "Diagram 1: Optim√°ln√≠ Re≈æim (Asynchronn√≠ Provoz)",
        "description": "Toto je n√°≈° standardn√≠, nejefektivnƒõj≈°√≠ stav. V≈°e bƒõ≈æ√≠ hladce, syst√©m je rychl√Ω a dispeƒçink jen odpoƒç√≠v√°.",
        "visualization": [
          "      ü§ñ              (1) Z√°pis dat                 üõ¢Ô∏è",
          "[ Web Agent ] --------------------------------> [ MongoDB ]",
          "  (Autonomn√≠)                                     (Archiv)",
          "                                                      |",
          "                                                      | (2) Notifikace",
          "                                                      |",
          "                                                      v",
          "      üß†                           (4) ALARM       üíª",
          "[ Dispeƒçink ] <---------------------------------- [ AI Code Box ]",
          " (Pasivn√≠ üò¥)      (p≈ôi Timeoute)                   (GUI & Klient)",
          "                                                      ^",
          "                                                      | (3) ƒåten√≠ dat",
          "                                                      +----------------"
        ],
        "componentRoles": {
          "Web Agent": "Samostatnƒõ pracuje a v√Ωsledky pos√≠l√° p≈ô√≠mo do MongoDB.",
          "MongoDB": "Slou≈æ√≠ jako centr√°ln√≠ arch√≠v. Jakmile p≈ôijme data, okam≈æitƒõ po≈°le notifikaci do AI Code Boxu.",
          "AI Code Box": "Na z√°kladƒõ notifikace si p≈ôeƒçte a zobraz√≠ zpr√°vu. U ka≈æd√©ho sv√©ho dotazu spou≈°t√≠ ƒçasov√Ω limit. Pokud odpovƒõƒè dlouho nechod√≠, po≈°le ALARM dispeƒçinku.",
          "Java Dispeƒçink": "Je v pasivn√≠m re≈æimu. Nezasahuje, jen monitoruje."
        }
      },
      {
        "state": "Diagram 2: P≈ô√≠m√© ≈ò√≠zen√≠ (Proxy Re≈æim)",
        "description": "Tento stav se aktivuje, kdy≈æ dispeƒçink obdr≈æ√≠ ALARM. P≈ôevezme plnou kontrolu nad probl√©mov√Ωm agentem, aby zajistil plynulost a spolehlivost komunikace.",
        "visualization": [
          "                                     (3a) Ulo≈æen√≠      üõ¢Ô∏è",
          "                                   +-----------------> [ MongoDB ]",
          "                                   |",
          "      üíª                 (3b) Zobrazen√≠      üß†              (2) P≈ô√≠kazy      ü§ñ",
          "[ AI Code Box ] <------------------------ [ Dispeƒçink ] ----------------> [ Web Agent ]",
          " (Tenk√Ω Klient)  ----(1) Po≈æadavek------> [ (AKTIVN√ç üö®)] <----(2) Odpovƒõdi--- (Probl√©mov√Ω)",
          "                                       (Krizov√Ω Mana≈æer)"
        ],
        "componentRoles": {
          "AI Code Box": "Funguje jen jako zobrazovac√≠ termin√°l. Ve≈°ker√© po≈æadavky pro probl√©mov√©ho agenta pos√≠l√° p≈ô√≠mo dispeƒçinku.",
          "Java Dispeƒçink": "Je plnƒõ aktivn√≠. St√°v√° se prost≈ôedn√≠kem. P≈ôij√≠m√° po≈æadavky z GUI, p≈ô√≠mo komunikuje s agentem a souƒçasnƒõ pos√≠l√° data na ulo≈æen√≠ do MongoDB a na zobrazen√≠ do GUI.",
          "Web Agent": "Je plnƒõ pod≈ô√≠zen dispeƒçinku a komunikuje pouze s n√≠m."
        }
      },
      {
        "state": "Diagram 3: Re-evaluace (N√°vrat do Norm√°lu)",
        "description": "Po stabilizaci situace se dispeƒçink pokus√≠ syst√©m vr√°tit zpƒõt do nejefektivnƒõj≈°√≠ho, optim√°ln√≠ho stavu.",
        "visualization": [
          "                     +---------------------------+",
          "                     |      üß† Dispeƒçink         |",
          "                     |   (ORCHESTR√ÅTOR ZMƒöNY) ‚öôÔ∏è  |",
          "                     +-------------+-------------+",
          "                                   |",
          "           (1) P≈ô√≠kaz: \"P≈ôepni na Optim√°ln√≠ Re≈æim\"",
          "                                   |",
          "      +----------------------------+----------------------------+",
          "      |                                                         |",
          "      v                                                         v",
          "      ü§ñ                                                      üíª",
          "[ Web Agent ]                                           [ AI Code Box ]",
          "(Mƒõn√≠ chov√°n√≠)                                          (Resetuje Dohled)"
        ],
        "componentRoles": {
          "Java Dispeƒçink": "Vystupuje jako orchestr√°tor. Nedoruƒçuje data, ale pos√≠l√° konfiguraƒçn√≠ p≈ô√≠kazy ostatn√≠m komponent√°m, aby zmƒõnily sv√© chov√°n√≠ a vr√°tily se do Stavu 1.",
          "Web Agent & AI Code Box": "Po p≈ôijet√≠ p≈ô√≠kazu okam≈æitƒõ mƒõn√≠ sv√© intern√≠ nastaven√≠ a zaƒçnou opƒõt fungovat podle pravidel Optim√°ln√≠ho Re≈æimu."
        }
      }
    ]
  }
}